<html>
  <head>
    <script src="./bundle.js"></script>
    <script src="./demo.js"></script>
  </head>
  <body>
    <h1>Demo of Skygear Chat plugin with JS-SDK</h1>
    <p>
      <label>End Point</label><br/>
      <input id="endpoint" type="text"
      value='https://chat.skygeario.com/' />
    </p>
    <p>
      <label>Api Key</label><br/>
      <input id="api-key" type="text"
      value='key' />
    </p>
    <p>You may got the above value from <a
      href="https://portal.skygear.io/app/info">Portal</a></p>
    <p><button
      onclick="demo.configSkygear(inputVal('endpoint'), inputVal('api-key'),
      'token');"
    >Apply End Point
    </button></p>
    <p>
      <label>Token</label>
      <span id="accessToken"></span>
    </p>
    <p>
      <label>Username</label>
      <span id="currentUsername"></span>
    </p>
    <p>
      <label>Email</label>
      <span id="currentEmail"></span>
    </p>
    <hr/>
    <h3>First to login</h3>
    <form action="#" onsubmit="return false;">
    <p>
      <label>Username</label><br/>
      <input id="username" type="text" />
    </p>
    <p>
      <label>Password</label><br/>
      <input id="password"  type="password" />
    </p>
    <p><button
      onclick="demo.loginSkygear(inputVal('username'), inputVal('password'));"
    >Login
    </button></p>
    <p><button
      onclick="demo.signupSkygear(inputVal('username'), inputVal('password'));"
    >Create user
    </button></p>
    </form>
    <hr/>
    <h3>Users</h3>
    <ul id="users">
    </ul>
    <p><button
      onclick="demo.fetchUserTo('users');"
    >Fetch Users</button></p>
    <hr/>
    <h3>Current user unread count</h3>
    <ul id="users">
    </ul>
    <p><button
      onclick="demo.fetchUnreadCountTo('conversation-unread', 'message-unread');"
    >Fetch Unread Count</button></p>
    <p>
      <label>Conversation</label>
      <span id="conversation-unread"></span>
    </p>
    <p>
      <label>Message</label>
      <span id="message-unread"></span>
    </p>
    <hr/>
    <h3>Create direct conversation</h3>
    <p>
      <label>Username</label>
      <input id="direct-user" type="text" />
    </p>
    <p><button
      onclick="demo.createDirectConversation(inputVal('direct-user'))"
      >Talk to User</button></p>
    <p id="direct-conversation"></p>
    <hr/>
    <h3>Create group conversation</h3>
    <p>
      <label>Username 1</label>
      <input id="group-user1" type="text" />
    </p>
    <p>
      <label>Username 2</label>
      <input id="group-user2" type="text" />
    </p>
    <p>
      <label>Username 3</label>
      <input id="group-user3" type="text" />
    </p>
    <p><button
      onclick="demo.createConversation(
        inputVal('group-user1'),
        inputVal('group-user2'),
        inputVal('group-user3')
      )"
      >Create group with above user</button></p>
    <p id="group-conversation"></p>
    <hr/>
    <h3>Conversation</h3>
    <ul id="conversation">
    </ul>
    <p><button
      onclick="demo.fetchConversationsTo('conversation');"
    >Fetch Converstions</button></p>
    <hr/>
    <h3>Go to converation</h3>
    <p>
      <label>Conversation ID</label>
      <input id="goto-conversation" type="text" />
    </p>
    <p><button
      onclick="window.location='message.html?conversation='+inputVal('goto-conversation');"
    >Go to conversation</button></p>
    <hr/>
    <h3>Delete a converation</h3>
    <p>
      <label>Conversation ID</label>
      <input id="delete-conversation" type="text" />
    </p>
    <p id="delete-conversation-result">
    </p>
    <p><button
      onclick="demo.deleteConversationTo(inputVal('delete-conversation'), 'delete-conversation-result')"
    >Delete</button></p>

    <script>
      var demo = new Demo(skygear, skygear_chat.default);
      demo.restore();
    </script>
  </body>
</html>
